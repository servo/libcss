# Toolchain definitions for building for RISC OS using the GCCSDK cross-compiler
GCCSDK_INSTALL_CROSSBIN ?= /home/riscos/cross/bin
GCCSDK_INSTALL_ENV ?= /home/riscos/env

CC := $(wildcard $(GCCSDK_INSTALL_CROSSBIN)/*gcc)
AR := $(wildcard $(GCCSDK_INSTALL_CROSSBIN)/*ar)
LD := $(CC)

CP := cp
RM := rm
MKDIR := mkdir
MV := mv
ECHO := echo
MAKE := make
PERL := perl
PKGCONFIG := $(GCCSDK_INSTALL_ENV)/ro-pkg-config
INSTALL := install
SED := sed
TOUCH := touch
LCOV := echo
GENHTML := echo
DOXYGEN := doxygen

# Toolchain flags
WARNFLAGS := -Wall -Wextra -Wundef -Wpointer-arith -Wcast-align \
	-Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes \
	-Wmissing-declarations -Wnested-externs -Werror -pedantic
CFLAGS += -std=c99 -D_BSD_SOURCE -I$(TOP)/include/ $(WARNFLAGS) \
	-mpoke-function-name `$(PKGCONFIG) --cflags libparserutils`
RELEASECFLAGS = $(CFLAGS) -DNDEBUG -O2
DEBUGCFLAGS = $(CFLAGS) -O0 -g
ARFLAGS := -cru
LDFLAGS += `$(PKGCONFIG) --libs libparserutils` -L$(TOP)/

CPFLAGS :=
RMFLAGS := -f
MKDIRFLAGS := -p
MVFLAGS := 
ECHOFLAGS := 
MAKEFLAGS :=
PKGCONFIGFLAGS :=
TOUCHFLAGS :=

ifneq (,$(findstring arm-unknown-riscos-gcc,$(CC)))
  EXEEXT := ,e1f
else
  EXEEXT := ,ff8
endif

# Default installation prefix
PREFIX ?= $(GCCSDK_INSTALL_ENV)

include build/Makefile.common
